# ミニゲーム制作

制作過程でのポイントはnoteから
[note](https://note.com/ery_ashiato/n/n5a0c73c20e8a)

### 主な機能について
1.ゲームの基本レイアウト
* コンテナはタイトルや説明を中央にまとめ、白背景で見やすくしました。
* 成功条件を大成功、成功、失敗の3段階に分け、プレイヤーが目標を理解しやすくしました。
* 成功条件のルール部分をコンパクトな水色背景のボックスで視覚的に見やすく表示しました。
* スタート、ジャンプの2種類のボタン表示はそれぞれ異なる背景色で視覚的に区別しました。
* position:relative;を使用することで、#gameArea内で子要素であるキャラクター画像を自由に動かせるようにしました。

2.ゲームロジックについて
* JavaScript(以下JS)の冒頭でゲームに必要なボタン、表示エリア、キャラクター画像などをIDで取得し変数に格納。これによってJSから要素を操作してゲームを動かしています。
* ゲームの現在の状態は
    - totalTime(制限時間)
    - gameTimer(タイマーID)
    - startTime(ゲーム開始時刻)
    - jumped(ジャンプ済みフラグ)
  の変数で把握しています。
* ミリ秒単位のタイミングゲームとなるためDate.nowではなくperformance.nowを用いてタイミングゲームの公平性の担保に努めています。
* startButton.onclick(ゲーム開始)からの流れは
  1. ゲーム開始時に結果表示やタイマー、ジャンプ状態をリセット
  2. ジャンプボタンを有効化し、新しいゲームタイマーを開始
  3. タイマーは0.1秒単位で表示し最初の3秒間表示、その後非表示
  4. 制限時間(10秒)を過ぎてもジャンプしなかった場合、時間切れとしてゲームを終了　　です。
* ジャンプしたタイミングがJSで定義された各条件のどこにあたるかを判定し、結果メッセージを表示しています。

* jumpButton.onclick(ジャンプ処理)ではジャンプボタンが押された時の経過時間を高精度で計測します。既にジャンプ済み、ゲーム開始前には操作を無効にします。
  ジャンプするとタイマーを停止しボタンを無効化、キャラクターのジャンプアニメーションを実行します。

3.ジャンプアニメーションについて
* CSSの@keyframesでキャラクターが地面から100px上に上がり、また地面に戻る一連のジャンプ動作を定義しています。
  そしてJSでcharacter.classList.add("jump")を実行することでこの動作をキャラクターに適用しています。
* アニメーションの再実行のためvoid character.offsetWidth;によりCSSアニメーションをリセットしています。


### 追加機能予定

結果シェア機能を予定しています。


